---
title: 學習 Nuxt Auth
date: 2018-06-29 23:02:42
tags:
---
# 學習 Nuxt Auth

一陣子沒碰前端了，先前用 nuxt 做了兩個起始專案
一個是練習用，Vuetify + Nuxt 做了 FGO 的活動兌換計算機
以及看別人 firebase + Nuxt 是怎麼整合

+ [GitHub: Practice](https://github.com/uWayLu/Pratice)
+ 公司的線上金流服務維護後台 UI

但一直有個問題就是，怎麼去實作 Auth Route 部份這塊
先前只學習到 pathToPage 會根據 Nuxt 下的目錄結構去生成

最近要實作權限管理，因為將專案的前後端分離，
後端只提供 api 去請求資源
趕快來惡補一下整個權限的架構

## 權限策略

在 [Vue + ElementUI 手撸后台管理网站基本框架(二)权限控制][1]中
> 前端记录所有的权限。用户登录后，后端返回用户角色，前端根据角色自行分配页面
> 前端仅记录页面，后端记录权限。
> 用户登陆后，后端返回用户权限列表，前端根据该列表生成可访问页面

基本上就是 2，所以會有最高權限，部份權限，一般人員大概三個等級

## Auth

驗證基本上是 middleware 有登入狀態的導向，以及非登入狀態的導向處理
根據頁面的性質去引入對應的 middleware
(比如說，註冊、登入、GUEST 這些頁面是不需要登入的，
而個人資料當然要登入狀態才能夠訪問)

## 小結

好，又是標準離題
基本上目前專案卡的問題是在需求變更，
需要追加權限的功能去允許多站台共用同一後台
當初自己設計的簡單 ORM 沒有考慮到分站台，
schema 要變更的情況下，db 部署也是問題
並且因為要分站台撈取資料，以及允許後台做 CRUD，複雜度直接上升
在後端架構處理好後，再來考慮 UI 的動態 router 問題

<!-- References -->
[1]: https://blog.csdn.net/harsima/article/details/77949448 "Vue + ElementUI 手撸后台管理网站基本框架(二)权限控制"
