<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hello World: Laravel RealWorld Example App | Webb Site</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="alternate" type="application/rss+xml" href="https://uwaylu.github.io/blog/rss.xml" title="Webb Site RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://uwaylu.github.io/blog/feed.atom" title="Webb Site Atom Feed">
    <link rel="alternate" type="application/json" href="https://uwaylu.github.io/blog/feed.json" title="Webb Site JSON Feed">
    <meta name="description" content="這篇文章是 Laravel Realworld Example App 初見筆記。">
    <link rel="preload" href="/blog/assets/css/0.styles.e8ab2707.css" as="style"><link rel="preload" href="/blog/assets/js/app.6f27d614.js" as="script"><link rel="preload" href="/blog/assets/js/6.816ec30b.js" as="script"><link rel="preload" href="/blog/assets/js/3.de5ffeec.js" as="script"><link rel="preload" href="/blog/assets/js/12.e20a303b.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.9b5608ed.js"><link rel="prefetch" href="/blog/assets/js/11.2232baae.js"><link rel="prefetch" href="/blog/assets/js/13.8e481032.js"><link rel="prefetch" href="/blog/assets/js/14.ab3bfeaa.js"><link rel="prefetch" href="/blog/assets/js/15.32ed75b8.js"><link rel="prefetch" href="/blog/assets/js/16.04403002.js"><link rel="prefetch" href="/blog/assets/js/17.77039c51.js"><link rel="prefetch" href="/blog/assets/js/18.0f6ae358.js"><link rel="prefetch" href="/blog/assets/js/19.8e7201d1.js"><link rel="prefetch" href="/blog/assets/js/20.b0c6610f.js"><link rel="prefetch" href="/blog/assets/js/21.68e4036f.js"><link rel="prefetch" href="/blog/assets/js/22.cd84cfc4.js"><link rel="prefetch" href="/blog/assets/js/23.43e302cf.js"><link rel="prefetch" href="/blog/assets/js/24.2dd81089.js"><link rel="prefetch" href="/blog/assets/js/25.0546073e.js"><link rel="prefetch" href="/blog/assets/js/26.f3a66547.js"><link rel="prefetch" href="/blog/assets/js/27.81bba9f2.js"><link rel="prefetch" href="/blog/assets/js/28.d66159bf.js"><link rel="prefetch" href="/blog/assets/js/29.1af17f02.js"><link rel="prefetch" href="/blog/assets/js/30.597d867f.js"><link rel="prefetch" href="/blog/assets/js/31.d3ea2d14.js"><link rel="prefetch" href="/blog/assets/js/32.e768592a.js"><link rel="prefetch" href="/blog/assets/js/33.79086fc7.js"><link rel="prefetch" href="/blog/assets/js/34.8e0f17a1.js"><link rel="prefetch" href="/blog/assets/js/35.a41798e8.js"><link rel="prefetch" href="/blog/assets/js/36.036fa3d9.js"><link rel="prefetch" href="/blog/assets/js/37.38b172ad.js"><link rel="prefetch" href="/blog/assets/js/4.4b9fb77b.js"><link rel="prefetch" href="/blog/assets/js/5.7778cb7b.js"><link rel="prefetch" href="/blog/assets/js/7.fb8a781a.js"><link rel="prefetch" href="/blog/assets/js/8.88ebe597.js"><link rel="prefetch" href="/blog/assets/js/9.dca8b8c6.js"><link rel="prefetch" href="/blog/assets/js/vuejs-paginate.abfff2d7.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e8ab2707.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/blog/" class="nav-link home-link">Webb Site </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="https://uwaylu.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">Webb Page</a></li><li class="nav-item"><a href="/blog/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/blog/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="/blog/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/blog/" class="nav-link mobile-home-link">Webb Site </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="https://uwaylu.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">Webb Page</a></li><li class="mobile-nav-item"><a href="/blog/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/blog/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><a href="/blog/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Hello World: Laravel RealWorld Example App
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2021-04-22T00:00:00.000Z">
      Thu Apr 22 2021
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/blog/tag/Laravel 5" data-v-42ccfcd5><span data-v-42ccfcd5>Laravel 5</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/blog/tag/PHP" data-v-42ccfcd5><span data-v-42ccfcd5>PHP</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/blog/tag/Realworld" data-v-42ccfcd5><span data-v-42ccfcd5>Realworld</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p>故事是這樣，PHP 寫了四年，<br>
期間玩過 1 年的 CodeIgniter 3，2 個月的 Laravel 5，<br>
2 年的 Slim 3 搭配 Laravel 的 Eloquent，但對 Laravel 本身不算熟悉。</p> <p>感謝某橘提供的關鍵字 <strong>Realworld。</strong></p> <h2 id="realworld-是什麼"><a href="#realworld-是什麼" class="header-anchor">#</a> Realworld 是什麼？</h2> <p><a href="http://realworld.io/" target="_blank" rel="noopener noreferrer">gothinkster/realworld<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>&quot;The mother of all demo apps&quot; — Exemplary fullstack <a href="http://medium.com/" target="_blank" rel="noopener noreferrer">Medium.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> clone powered by React, Angular, Node, Django, and many more 🏅</p></blockquote> <p>你可以在這裡找到各種語言或框架在實際開發時，可能會遇到的應用範例。</p> <h2 id="那麼要怎麼開始呢"><a href="#那麼要怎麼開始呢" class="header-anchor">#</a> 那麼要怎麼開始呢</h2> <p>開發環境我選擇 <code>laradock</code> ，理由是 docker 的易配置，且工作時已經熟悉，<br>
並把焦點放在 laravel-realworld-example-app 本身上。</p> <p><a href="https://github.com/gothinkster/laravel-realworld-example-app" target="_blank" rel="noopener noreferrer">gothinkster/laravel-realworld-example-app<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>跟著 <a href="http://readme.md" target="_blank" rel="noopener noreferrer">README.m<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>d 手把手，docker 環境相關部分的另外紀錄。</p> <ul><li><p>移除 <code>composer.lock</code> 再做 <code>composer install</code></p> <p>原本的 composer.lock 內容會因為相依套件的版本問題，<br>
而無法正常安裝；開發環境我們不 care composer.lock</p></li> <li><p><code>~~php artisan serve~~</code> and You can now access the server at <a href="http://localhost:8000/" target="_blank" rel="noopener noreferrer">http://localhost:8000<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>環境配置是在容器中，由 nginx 做 Web Server，<br>
配置域名設定檔到 <code>laravel.realworld.conf</code><br>
將域名 <code>laravel.realworld.test</code> 加到本機 hosts</p> <p>如果系統有裝 php，也可以在外面玩 <code>php artisan serve</code><br>
想在容器中跑的話，要另外 expose port，見以下</p></li> <li><p>或可以使用專案中直接提供的 docker 配置，<code>./docker</code></p></li></ul> <h2 id="接下來讀-code-吧-範例中"><a href="#接下來讀-code-吧-範例中" class="header-anchor">#</a> 接下來讀 Code 吧，範例中……</h2> <h3 id="實作-api-tests"><a href="#實作-api-tests" class="header-anchor">#</a> 實作 API Tests</h3> <p>可以看到，laravel 中也是使用 phpunit 來做測試</p> <ul><li><p><code>phpunit tests/Feature/Api/UserTest.php</code></p> <p>得到以下錯誤</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Caused by
PDOException: SQLSTATE<span class="token punctuation">[</span>HY000<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1044</span><span class="token punctuation">]</span> Access denied <span class="token keyword">for</span> user <span class="token string">'default'</span>@<span class="token string">'%'</span> to database <span class="token string">'realworld_test'</span>
</code></pre></div><p>可以看見 phpunit.xml 中配置了 phpunit 測試時需要的環境變數</p> <p>手動建立對應測試用 Database</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 進到容器中 mysql</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token string">'realworld_test'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> PRIVILEGERS <span class="token keyword">ON</span> realworld_test<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'default'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre></div><p>現在可以成功連接測試資料庫了，換成其他錯誤</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Caused by
ErrorException: Using integers <span class="token keyword">for</span> registered <span class="token function">date</span> claims is deprecated, please use DateTimeImmutable objects instead.
</code></pre></div><p>手動降 lcobucci/jwt 版本可解</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">composer</span> require lcobucci/jwt:3.3.3
</code></pre></div><p><img src="data:image/png;base64,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" alt="phpunit passed"><br>
到這邊 pass</p></li> <li><p>api 的 http test 實作？看 <code>UserTest.it_returns_the_current_user_when_logged_in()</code></p> <p><a href="https://laravel.tw/docs/5.2/testing" target="_blank" rel="noopener noreferrer">Testing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Illuminate\Foundation\Testing\Concerns 中的 MakesHttpRequests trait，<br>
提供了模擬 http 請求與回應，測試方法則斷言回應內容。</p> <p>Testcase 使用 DatabaseMigrations trait，<br>
在每次測試執行前後分別自動執行 migrate:fresh 與 migrate:rollback，<br>
產生臨時的測試資料庫。</p></li> <li><p>其他的測試案例大同小異；jsonBody的部分，一樣只斷言驗證是否為 json<br>
要驗證 json property required 和 type, 可用 justinrainbow/json-schema</p></li></ul> <h3 id="migrate-seed-與-phinx-的異同"><a href="#migrate-seed-與-phinx-的異同" class="header-anchor">#</a> Migrate/Seed 與 phinx 的異同</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan list migrate
<span class="token comment"># outputs</span>
Available commands <span class="token keyword">for</span> the <span class="token string">&quot;migrate&quot;</span> namespace:
  migrate:fresh     Drop all tables and re-run all migrations
  migrate:install   Create the migration repository
  migrate:refresh   Reset and re-run all migrations
  migrate:reset     Rollback all database migrations
  migrate:rollback  Rollback the last database migration
  migrate:status    Show the status of each migration

php artisan <span class="token builtin class-name">help</span> migrate
<span class="token comment"># outputs</span>
Usage:
  migrate <span class="token punctuation">[</span>options<span class="token punctuation">]</span>

Options:
      --database<span class="token punctuation">[</span><span class="token operator">=</span>DATABASE<span class="token punctuation">]</span>  The database connection to use.
      --force                Force the operation to run when <span class="token keyword">in</span> production.
      --path<span class="token punctuation">[</span><span class="token operator">=</span><span class="token environment constant">PATH</span><span class="token punctuation">]</span>          The path of migrations files to be executed.
      --pretend              Dump the SQL queries that would be run.
      --seed                 Indicates <span class="token keyword">if</span> the seed task should be re-run.
      --step                 Force the migrations to be run so they can be rolled back individually.
  -h, --help                 Display this <span class="token builtin class-name">help</span> message
  -q, --quiet                Do not output any message
  -V, --version              Display this application version
      --ansi                 Force ANSI output
      --no-ansi              Disable ANSI output
  -n, --no-interaction       Do not ask any interactive question
      --env<span class="token punctuation">[</span><span class="token operator">=</span>ENV<span class="token punctuation">]</span>            The environment the <span class="token builtin class-name">command</span> should run under
  -v<span class="token operator">|</span>vv<span class="token operator">|</span>vvv, --verbose       Increase the verbosity of messages: <span class="token number">1</span> <span class="token keyword">for</span> normal output, <span class="token number">2</span> <span class="token keyword">for</span> <span class="token function">more</span> verbose output and <span class="token number">3</span> <span class="token keyword">for</span> debug

Help:
  Run the database migrations
</code></pre></div><p>都有提供 migrate 跟 seed，細節使用時再搭配文件；<br>
laravel artisan 另外提供了 <code>refresh</code>, <code>fresh</code>, <code>reset</code> 操作；<br>
phinx 有提供 Dry-Run 功能 <code>$command —dry-run | -x</code></p> <p><a href="https://laravel.tw/docs/5.2/migrations" target="_blank" rel="noopener noreferrer">Database: Migrations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br> <a href="https://laravel.tw/docs/5.2/seeding" target="_blank" rel="noopener noreferrer">Database: Seeding<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br> <a href="https://book.cakephp.org/phinx/0/en/commands.html#the-migrate-command" target="_blank" rel="noopener noreferrer">Commands - 0.12<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="app-config"><a href="#app-config" class="header-anchor">#</a> App Config</h3> <ul><li>Laravel 中的 configuration 有預設值，在 <code>config/*.php</code> 中，
部分可以透過 <code>.env</code> 變更</li> <li>標記：沒概念的 <code>services.php</code></li></ul> <h3 id="相依-laravel-cors-如何處理-cors"><a href="#相依-laravel-cors-如何處理-cors" class="header-anchor">#</a> 相依 laravel-cors 如何處理 CORS</h3> <ul><li>注意 <code>config/cors.php</code></li></ul> <h3 id="database"><a href="#database" class="header-anchor">#</a> Database</h3> <ul><li><p><code>database/factories/ModelFactory.php</code></p> <p><a href="https://laravel.com/docs/5.5/database-testing" target="_blank" rel="noopener noreferrer">Database Testing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p><strong>Writing Factories</strong>
When testing, you may need to insert a few records into your database before executing your test. Instead of manually specifying the value of each column when you create this test data, Laravel allows you to define a default set of attributes for each of your Eloquent models using model factories. ...</p></blockquote></li></ul> <h3 id="routes"><a href="#routes" class="header-anchor">#</a> Routes</h3> <ul><li>標記：沒概念的 <code>channels.php</code></li></ul> <h3 id="app"><a href="#app" class="header-anchor">#</a> App</h3> <ul><li><p><strong>Service Provider?</strong></p> <p>Laravel 實作 DI 的方式</p> <p><a href="https://medium.com/mr-efacani-teatime/laravel%E5%A6%82%E4%BD%95%E5%AF%A6%E7%8F%BE%E4%BE%9D%E8%B3%B4%E6%80%A7%E6%B3%A8%E5%85%A5-d760c8e5abde" target="_blank" rel="noopener noreferrer">Laravel如何實現依賴性注入？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>Laravel藉由Service Container與Service Provider實現了依賴性注入，達到低耦合、易擴展的特性。理解何時使用Service Provider，有助於我們實作良好的系統，這也是這份筆記希望研討的主要議題。<br>
先講結論--Service Provider適合使用在以下時機：<br>
1.希望實踐依賴介面而不是類別的注入時。<br>
2.希望建立全域(global)的依賴實例時。<br>
3.希望根據狀況，回傳不同的依賴實例時。</p></blockquote> <p>Slim3 中則是以 <code>$container['MySerivce']</code>手動注入到 container，<br>
同質 Service 是否依賴介面，由開發者自行決定與實作，<br>
是否使用單例模式開發者也需自行處理</p> <p>不管是哪個框架，無論變數還是實例，都應該思考<strong>全域</strong>的必要性</p></li></ul> <h3 id="realworld"><a href="#realworld" class="header-anchor">#</a> Realworld</h3> <ul><li><p>Model implements Contracts</p> <p><a href="https://laravel.tw/docs/5.3/contracts" target="_blank" rel="noopener noreferrer">Contracts<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>Controllers <code>extends ApiController</code></p> <p>熟悉的味道；這邊我先前的習慣是會將 ApiController 定為抽象類別，<br>
是為了擴充性而保留？或只是習慣問題。</p></li></ul> <h2 id="延伸閱讀"><a href="#延伸閱讀" class="header-anchor">#</a> 延伸閱讀</h2> <p>core packages; 相依套件；....</p> <h3 id="symfony"><a href="#symfony" class="header-anchor">#</a> Symfony</h3> <p>下回分曉！</p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#realworld-是什麼" title="Realworld 是什麼？">Realworld 是什麼？</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#那麼要怎麼開始呢" title="那麼要怎麼開始呢">那麼要怎麼開始呢</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#接下來讀-code-吧-範例中" title="接下來讀 Code 吧，範例中……">接下來讀 Code 吧，範例中……</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#實作-api-tests" title="實作 API Tests">實作 API Tests</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#migrate-seed-與-phinx-的異同" title="Migrate/Seed 與 phinx 的異同">Migrate/Seed 與 phinx 的異同</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#app-config" title="App Config">App Config</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#相依-laravel-cors-如何處理-cors" title="相依 laravel-cors 如何處理 CORS">相依 laravel-cors 如何處理 CORS</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#database" title="Database">Database</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#routes" title="Routes">Routes</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#app" title="App">App</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#realworld" title="Realworld">Realworld</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#延伸閱讀" title="延伸閱讀">延伸閱讀</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#symfony" title="Symfony">Symfony</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.6f27d614.js" defer></script><script src="/blog/assets/js/6.816ec30b.js" defer></script><script src="/blog/assets/js/3.de5ffeec.js" defer></script><script src="/blog/assets/js/12.e20a303b.js" defer></script>
  </body>
</html>
